# Шифрование файлов

Для шифрования файлов нужно выбрать файлы, установить опцию Шифрование, задать сертификаты получателей и параметры шифрования.

## Выбор файлов для шифрования

В приложении доступно шифрования одного или группы выбранных файлов. Файлы для шифрования можно добавить двумя способами: через кнопку **Добавить** (+) или перетащив их мышкой в область формирования списка файлов.
Выбранные файлы заносятся в левую область и представляют собой одноуровневый список. 
 
![files-for-cipher.png](./images/files-for-cipher.png "Список файлов для шифрования")

Для данного списка доступны поиск, фильтрация, управление файлами через контекстное меню или  кнопками для каждого файла.

![files-for-cipher-menu.png](./images/files-for-cipher-menu.png "Контекстное меню управления списком файлов")

## Настройка параметров шифрования

Для доступа к настройке параметров шифрования в разделе Операции необходимо выбрать опцию Шифрование.

![cipher-params.png](./images/cipher-params.png "Выбор параметров шифрования")

В параметрах можно настроить:
-	**Кодировка** - сохранение зашифрованного файла в одной из двух кодировок BASE64 или DER.
-	**Алгоритм шифрования** – файл шифруется по одному из алгоритмов: «ГОСТ 28147-89», «ГОСТ Р 34.12-2015 Магма», «ГОСТ Р 34.12-2015 Кузнечик». Данный параметр доступен для выбора только начиная с версии КриптоПро CSP 5.0.11635. 
-	**Удалить файлы после шифрования** -  исходные файлы, в случае успешного завершения операции, удаляются из файловой системы.

Можно задать каталог для сохранения зашифрованных документов, выбрав в операциях опцию **Сохранить результат в каталоге**. При установке флага становится доступно поле выбора каталога.
 
![cipher-direct.png](./images/cipher-direct.png "Выбор каталога для сохранения зашифрованного файла")

Если флаг не установлен, то файлы сохраняются рядом с исходным файлом. 

Опция **Сохранить копию в Документах** служит для сохранения копии полученного после операции файла в специальный каталог Documents, расположенный в папке пользователя в каталоге ./Trusted/CryptoARM GOST/. Файлы из данного каталога доступны в пункте меню **Документы**.

Выбранные параметры шифрования можно сохранить и использовать при последующих запусках приложения. Процесс сохранения и изменения параметров описан в пункте **Управление параметрами операции**.

## Выбор сертификатов шифрования

Для того, чтобы выполнить шифрование необходимо выбрать сертификаты получателей. Эта операция производится нажатием кнопки **Выбрать** сертификаты шифрования. В появившемся диалоговом окне отображаются сертификаты категории Личные и категории Сертификаты других пользователей.

![cipher-certs.png](./images/cipher-certs.png "Выбор сертификатов шифрования")

В списке допускается выбор нескольких сертификатов, так как число получателей может быть различным. 

Выбранные сертификаты получателей перемещаются в правый список. Сертификаты в списке можно удалять, по ним можно посмотреть детальную информацию, нажав на интересующий сертификат в правой области.

![cipher-cert-info.png](./images/cipher-cert-info.png "Информация о сертификате шифрования")

Если список сертификатов получателей заполнен, то его можно зафиксировать нажатием на кнопку **Выбрать**. 

Изменить список сертификатов шифрования можно с помощью контекстного меню. Удалить сертификаты из сформированного списка можно кнопкой **Удалить**.

![cipher-certs-change.png](./images/cipher-certs-change.png "Изменение списка сертификатов шифрования")

Если список личных сертификатов и сертификатов других пользователей пуст, то можно их создать или импортировать в разделе **Сертификаты**.

## Шифрование файлов

При условии выбора файлов, установки опции Шифрование, задания сертификатов получателей становится доступной кнопка **Выполнить**. Шифровать можно любые файлы, кроме зашифрованных.

![cipher1.png](./images/cipher1.png "Шифрование файлов")

Нажатие на кнопку **Выполнить** запускает процесс шифрования. Исходные и зашифрованные файлы отображаются в отдельном мастере **Результаты операций**.

![cipher-result.png](./images/cipher-result.png "Результаты операции шифрования")

Если в параметрах шифрования была выбрана опция **Удалить файлы после шифрования**, то в **Результатах операций** будут только полученные зашифрованные файлы.

Документы из **Результатов операций** можно **Открыть в мастере Подписи и шифрования** для выполнения других операций или **Сохранить копию в Документах**. Операция **Сохранить копию в Документах** служит для сохранения копии полученного после операции файла в специальный каталог Documents, расположенный в папке пользователя в каталоге ./Trusted/CryptoARM GOST/. Файлы из данного каталога доступны в пункте меню **Документы**.

После выполнения операции мастер **Подписи и шифрования** очищается от добавленных в него файлов. Результаты операций сохраняются до выполнения следующей операции или до закрытия приложения и доступны в меню **Подпись и шифрование - Результаты операций**.
 
